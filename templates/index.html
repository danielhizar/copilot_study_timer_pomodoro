<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="button-container">
        <button id="modeToggle" onclick="toggleMode()">Switch to Dark Mode</button>
        <button onclick="openCustomizePopup()">Customize Timers</button>
    </div>
    <div class="music-session-container">
        <div class="music-container">
            <h3>Focus Music</h3>
            <audio id="focusMusic" src="{{ url_for('static', filename='audio/focusmusic1.mp3') }}"></audio>
            <div class="music-controls">
                <select id="musicOptions" onchange="changeMusic(this.value)">
                    <option value="static/audio/focusmusic1.mp3">Focus Music 1</option>
                    <option value="static/audio/focusmusic2.mp3">Focus Music 2</option>
                    <option value="static/audio/focusmusic3.mp3">Focus Music 3</option>
                    <option value="static/audio/focusmusic4.mp3">Focus Music 4</option>
                    <option value="static/audio/focusmusic5.mp3">Focus Music 5</option>
                </select>
                <button id="toggleMusicButton" onclick="toggleMusic()"><i class="fas fa-play"></i></button>
            </div>
        </div>
        <div class="session-counts">
            <p>Completed Study Sessions: <span id="studyCount">0</span></p>
            <p>Completed Breaks: <span id="breakCount">0</span></p>
        </div>
    </div>
    <div class="quote-container">
        <p id="quote"></p>
    </div>
    <div class="container">
        <div class="timer">
            <div class="progress-bar" id="studyProgressBar"></div>
            <h2>Study Timer</h2>
            <p id="studyDuration">25 mins</p>
            <h3 id="studyTime">25:00</h3>
            <button id="startStudyButton" onclick="startStudyTimer()">Start Study</button>
            <button id="pauseStudyButton" onclick="pauseStudyTimer()" disabled>Pause Study</button>
            <button id="resetStudyButton" onclick="resetStudyTimer()" disabled>Reset Study</button>
        </div>
        <div class="timer">
            <div class="progress-bar" id="breakProgressBar"></div>
            <h2>Break Timer</h2>
            <p id="breakDuration">5 mins</p>
            <h3 id="breakTime">05:00</h3>
            <button id="startBreakButton" onclick="startBreakTimer()">Start Break</button>
            <button id="pauseBreakButton" onclick="pauseBreakTimer()" disabled>Pause Break</button>
            <button id="resetBreakButton" onclick="resetBreakTimer()" disabled>Reset Break</button>
        </div>
        <div class="timer">
            <div class="progress-bar" id="longBreakProgressBar"></div>
            <h2>Long Break Timer</h2>
            <p id="longBreakDuration">15 mins</p>
            <h3 id="longBreakTime">15:00</h3>
            <button id="startLongBreakButton" onclick="startLongBreakTimer()" disabled>Start Long Break</button>
            <button id="pauseLongBreakButton" onclick="pauseLongBreakTimer()" disabled>Pause Long Break</button>
            <button id="resetLongBreakButton" onclick="resetLongBreakTimer()" disabled>Reset Long Break</button>
        </div>
    </div>
    <audio id="studyEndSound" src="{{ url_for('static', filename='audio/study_end.wav') }}"></audio>
    <audio id="breakEndSound" src="{{ url_for('static', filename='audio/break_end.wav') }}"></audio>
    <audio id="startSound" src="{{ url_for('static', filename='audio/start_sound.wav') }}"></audio>

    <!-- Customize Timer Popup -->
    <div id="customizePopup" class="popup">
        <div class="popup-content">
            <span class="close" onclick="closeCustomizePopup()">&times;</span>
            <h2>Customize Timer</h2>
            <form id="customizeForm" onsubmit="customizeTimers(event)">
                <label for="studyDurationInput">Study Duration (minutes):</label>
                <input type="number" id="studyDurationInput" name="studyDurationInput" min="1" value="25">
                <label for="breakDurationInput">Break Duration (minutes):</label>
                <input type="number" id="breakDurationInput" name="breakDurationInput" min="1" value="5">
                <label for="longBreakDurationInput">Long Break Duration (minutes):</label>
                <input type="number" id="longBreakDurationInput" name="longBreakDurationInput" min="1" value="15">
                <label for="sessionsBeforeLongBreakInput">Sessions Before Long Break:</label>
                <input type="number" id="sessionsBeforeLongBreakInput" name="sessionsBeforeLongBreakInput" min="1" value="4">
                <button type="submit">Save</button>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>